var SexyTable;!function(t){t.AutoMakeSexy=!0,$(document).ready(function(){t.AutoMakeSexy&&$(".sexy-table").each(function(e,i){new t.Table(i)})}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,r=function(){},n=function(){return i.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,n.prototype=new r,n})}(SexyTable||(SexyTable={}));var SexyTable;!function(t){var e=function(){function t(t){this.table=t,this.container=this.table.GetContainer(),this.Serialize()}return t.prototype.GetHeadings=function(){return this.headings},t.prototype.GetSerialized=function(){return this.serialized},t.prototype.Serialize=function(){return this.serialized=[],this.headings=this.ExtractHeadings(),0==this.container.find(".tbody").length?this.container.find("ul").each(this.AddRow.bind(this)):this.container.find(".tbody ul").each(this.AddRow.bind(this)),this.serialized},t.prototype.ExtractHeadings=function(){var t=[];if(0==this.container.find(".thead").length)for(var e=this.container.find("ul").first().find("li").length,i=0;e>i;i++)t.push("col_"+i);else this.container.find(".thead ul").first().find("li").each(function(e,i){t.push($(i).find(".inner").text().toLowerCase().replace(" ","_"))});return t},t.prototype.AddRow=function(t,e){var i={},r=this;i._guid=this.CreateGuid(),i._dom=e,$(e).find("li").each(function(t,e){""!=r.headings[t]&&(i[r.headings[t]]=$(e).find(".inner").text())}),this.serialized.push(i)},t.prototype.CreateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})},t}();t.Reader=e}(SexyTable||(SexyTable={}));var SexyTable;!function(t){var e=function(){function t(t){this.table=t,this.container=this.table.GetContainer(),this.EnsureTableHasThead(),this.originalTable=this.table.GetReader().GetSerialized().slice(0),this.BuildIndex()}return t.prototype.EnsureTableHasThead=function(){if(2!=this.container.find(".thead, .tbody").length)throw new Error("Searchable tables MUST use .thead and .tbody containers!")},t.prototype.BuildIndex=function(){var t=this.table.GetReader().GetSerialized(),e=this.table.GetReader().GetHeadings();this.index=lunr(function(){this.ref("_guid");for(var t=0;t<e.length;t++)"_guid"!=e[t]&&"_dom"!=e[t]&&this.field(e[t])});for(var i in t){var r={};for(var n in t[i])"_guid"==n?r[n]=t[i][n]:"_dom"!=n&&(r[n]=n+":"+t[i][n]);this.index.add(r)}},t.prototype.Query=function(t,e){if(void 0===e&&(e="all"),null==t||""==t)return void this.ResetTable();var i=new Array;if("all"==e){for(var r=this.table.GetReader().GetHeadings(),n=0;n<r.length;n++)"_guid"!=r[n]&&"_dom"!=r[n]&&(i=$.merge(i,this.index.search(r[n]+":"+t)));i.sort(function(t,e){return e.score-t.score});var a=new Array;for(var s in i){var o=!1;for(var l in a)if(i[s].ref===a[l].ref){o=!0;break}o||a.push(i[s])}i=a}else i=this.index.search(e+":"+t);var h=new Array;for(var d in i)for(var c in this.originalTable)i[d].ref==this.originalTable[c]._guid&&h.push(this.originalTable[c]._dom);this.container.find(".tbody").empty().append(h),this.table.GetReader().Serialize();var f=this.container.find(".thead i");f.removeClass("fa-sort-asc"),f.removeClass("fa-sort-desc"),f.addClass("fa-sort")},t.prototype.ResetTable=function(){var t=new Array;for(var e in this.originalTable)t.push(this.originalTable[e]._dom);this.container.find(".tbody").empty().append(t),this.table.GetReader().Serialize();var i=this.container.find(".thead i");i.removeClass("fa-sort-asc"),i.removeClass("fa-sort-desc"),i.addClass("fa-sort")},t}();t.Searcher=e}(SexyTable||(SexyTable={}));var SexyTable;!function(t){var e=function(){function t(t){this.table=t,this.container=this.table.GetContainer(),this.SetWidthOfCells(),this.SetHeightOfRows(),this.UnhideContainer(),$(window).resize(this.SetWidthOfCells.bind(this)),$(window).resize(this.SetHeightOfRows.bind(this))}return t.prototype.SetHeightOfRows=function(){var t=this;this.container.find("ul").css("height","auto"),this.container.find("ul").each(function(e,i){$(i).css("height",t.CalculateRowHeight(i))})},t.prototype.CalculateRowHeight=function(t){var e=-1;return $(t).find("li").each(function(t,i){$(i).outerHeight(!0)>e&&(e=$(i).outerHeight(!0))}),e},t.prototype.SetWidthOfCells=function(){this.container.find("li").css("width",this.CalculateCellWidth())},t.prototype.CalculateCellWidth=function(){var t=this.GetNumberOfCols(),e=this.GetTotalWidthOfTable(),i=this.GetCellPadding();return e/t-i},t.prototype.UnhideContainer=function(){this.container.css("visibility","visible")},t.prototype.GetTotalWidthOfTable=function(){var t,e=this.container[0].getBoundingClientRect();return t=e.width?e.width:e.right-e.left},t.prototype.GetNumberOfCols=function(){return this.container.find("ul").first().find("li").length},t.prototype.GetCellPadding=function(){var t=this.container.find("li").first();return t.outerWidth(!0)-t.width()},t}();t.Sizer=e}(SexyTable||(SexyTable={}));var SexyTable;!function(t){var e=function(){function t(t){this.table=t,this.caseInsensitive=!0,this.container=this.table.GetContainer(),this.EnsureTableHasThead(),this.InsertSortableToggles()}return t.prototype.EnsureTableHasThead=function(){if(2!=this.container.find(".thead, .tbody").length)throw new Error("Sortable tables MUST use .thead and .tbody containers!")},t.prototype.InsertSortableToggles=function(){var t=this;this.container.find(".thead ul").first().find(".inner").each(function(e,i){""!=$(i).text()&&($(i).append('<i class="fa fa-sort"></i>'),$(i).css("cursor","pointer"),$(i).click(t.OnSort.bind(t,i)))})},t.prototype.OnSort=function(t){var e,i=$(t).find("i");i.hasClass("fa-sort")?(e="asc",i.removeClass("fa-sort"),i.addClass("fa-sort-asc")):i.hasClass("fa-sort-asc")?(e="desc",i.removeClass("fa-sort-asc"),i.addClass("fa-sort-desc")):i.hasClass("fa-sort-desc")&&(e="as-loaded",i.removeClass("fa-sort-desc"),i.addClass("fa-sort"));var r=this.container.find(".thead i").not(i);switch(r.removeClass("fa-sort-asc"),r.removeClass("fa-sort-desc"),r.addClass("fa-sort"),e){case"asc":this.ReDrawTable(this.newTableData().sort(this.sortByKey($(t).text().toLowerCase().replace(" ","_"))));break;case"desc":this.ReDrawTable(this.newTableData().sort(this.sortByKey($(t).text().toLowerCase().replace(" ","_"))).reverse());break;default:this.ReDrawTable(this.table.GetReader().GetSerialized())}},t.prototype.ReDrawTable=function(t){var e=new Array;for(var i in t)e.push(t[i]._dom);this.container.find(".tbody").empty().append(e)},t.prototype.newTableData=function(){return this.table.GetReader().GetSerialized().slice(0)},t.prototype.sortByKey=function(t){var e=this;return function(i,r){return e.naturalSort(i[t],r[t])}},t.prototype.naturalSort=function(t,e){var i,r,n=/(^([+\-]?(?:\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[\da-fA-F]+$|\d+)/g,a=/^\s+|\s+$/g,s=/\s+/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,h=/^0/,d=function(t){return(this.caseInsensitive&&(""+t).toLowerCase()||""+t).replace(a,"")},c=d(t)||"",f=d(e)||"",u=c.replace(n,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=f.replace(n,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),y=parseInt(null==c.match(l)?null:c.match(l).toString(),16)||1!==u.length&&Date.parse(c),b=parseInt(null==f.match(l)?null:f.match(l).toString(),16)||y&&f.match(o)&&Date.parse(f)||null,x=function(t,e){return(!t.match(h)||1==e)&&parseFloat(t)||t.replace(s," ").replace(a,"")||0};if(b){if(b>y)return-1;if(y>b)return 1}for(var v=0,g=u.length,S=p.length,w=Math.max(g,S);w>v;v++){if(i=x(u[v],g),r=x(p[v],S),isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),r>i)return-1;if(i>r)return 1}return 0},t}();t.Sorter=e}(SexyTable||(SexyTable={}));var SexyTable;!function(t){var e=function(){function e(e){this.container=$(e),this.container.data("sexy-table",this),this.InsertCellWrapper(),this.reader=new t.Reader(this),this.container.hasClass("sortable")&&this.MakeSortable(),this.sizer=new t.Sizer(this),"undefined"!=typeof lunr&&(this.searcher=new t.Searcher(this))}return e.prototype.GetContainer=function(){return this.container},e.prototype.GetReader=function(){return this.reader},e.prototype.GetSizer=function(){return this.sizer},e.prototype.GetSorter=function(){return this.sorter},e.prototype.GetSearcher=function(){return this.searcher},e.prototype.MakeSortable=function(){this.container.hasClass("sortable")||this.container.addClass("sortable"),this.sorter=new t.Sorter(this)},e.prototype.InsertCellWrapper=function(){this.container.find("li").wrapInner('<div class="inner"></div>')},e}();t.Table=e}(SexyTable||(SexyTable={}));